---
title: AI best practice
category: operation
tags: [AI, programming, productivity, best practice]
---

title:  AI best practice

* TOC
{:toc}


# AI models for coding

[Claude 4 vs Gemini 2.5 Pro](https://www.entelligence.ai/blogs/claude-4-vs-gemini-2.5-pro)

[Claude 4 vs Claude 3.7 Sonnet vs Gemini 2.5 Pro – Which Is Best For Coding?](https://blog.getbind.co/2025/05/23/claude-4-vs-claude-3-7-sonnet-vs-gemini-2-5-pro-which-is-best-for-coding/)

[Introducing Claude 4](https://www.anthropic.com/news/claude-4)

# Motivation

## Thinking in AI

## Use AI for programming

- learn how to use AI for programming efficiently

- be familiar with one or two AI models for programming


## Use AI for making life easier

- build the practice to try AI first


## Multi-language support

- try to describe in english first

- if it can't be accurate, switch to native language


## AI is everywhere, what is your advantage?


# AI basics

# Use AI for programming

## Ask AI for patch review?

- post the patch to chat box directly

    - looks deepseek.com is pretty good at reviewing code

    - *how to request deepseek.com to review multiple patches?*

        - provide the whole patchset mbox message


## Ask AI to generate functions

### One example provided by AI(Cursor)

```
I need to create a function that processes user data in Python 3.8. The function should:
- Take a list of user objects as input
- Filter out inactive users
- Calculate average age
- Handle empty input lists
- Return a dictionary with results

Here's an example of the input data structure:
[{"name": "John", "age": 30, "active": true}, ...]

Expected output format:
{"avg_age": 25.5, "total_users": 10}
```

## Ask AI to write document or commit log

AI is good at writing document and commit log.

90% of the following commit is contributed by AI(Cursor):

[ublk: document auto buffer registration(UBLK_F_AUTO_BUF_REG)](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=ff20c516485efbeb5c32bcb6aa5a24f73774185b)

## Ask AI to analyze kernel panic report

### deepseek can understand the panic log

- AI can try to think all related factors for this issue, which is helpful

- Follows one example:

[[bug report] BUG: kernel NULL pointer dereference, address: 0000000000000001](https://lore.kernel.org/linux-block/CAGVVp+VN9QcpHUz_0nasFf5q9i1gi8H8j-G-6mkBoqa3TyjRHA@mail.gmail.com/)

## Ask AI to explain new patch or new kernel feature

### Deepseek(reasoning & internet) provides perfect answer

Example: 

```Can you explain a bit IOVA-based DMA API added to linux kernel recently?```

- 10 results are searched

- reasoning based on the 10 searches, and provide pretty good understanding
on the question.

# Use gemini API for coding assistence

## overview

## gemini-cli

[gemini-cli](https://github.com/google-gemini/gemini-cli)

- install

npm install -g @google/gemini-cli

cd your_project_top/

gemini

## use gemini API in python code directly

Google provides library to integrate gemini API directly, and allow to use
it in your application.


### patch review

- you just need to provide one link or pr, so no need to fetch the content
  manually

### write code

- pretty good at code refactoring

### issues

#### more memories, more mistakes

When less context left, mistakes rate is increased quickly.

When context left drops to 50%, please consider to drop current context
info.

#### communicate with agent like a human being

Guide and confirm.


# Use Claude code for coding

## Overview

### Best practice

[Claude Code: Best practices for agentic coding](https://www.anthropic.com/engineering/claude-code-best-practices)

#### Customize your setup

- `CLAUDE.md`

- Curate Claude's list of allowed tools

    - Select "Always allow" when prompted during a session.

    - Use the /permissions command after starting Claude Code to add or remove tools from the allowlist.

    For example, you can add Edit to always allow file edits, Bash(git commit:*) to allow git commits,
    or mcp__puppeteer__puppeteer_navigate to allow navigating with the Puppeteer MCP server.

    - Manually edit your .claude/settings.json or ~/.claude.json

    (we recommend checking the former into source control to share with your team). Use the --allowedTools
    CLI flag for session-specific permissions.

- If using GitHub, install the gh CLI


#### Give Claude more tools

-  Use Claude with bash tools

Tell Claude the tool name with usage examples

Tell Claude to run --help to see tool documentation

Document frequently used tools in CLAUDE.md


- Use Claude with MCP

- Use custom slash commands

For repeated workflows—debugging loops, log analysis, etc.—store prompt templates
in Markdown files within the .claude/commands folder. These become available through
the slash commands menu when you type /. You can check these commands into git to
make them available for the rest of your team.

Custom slash commands can include the special keyword $ARGUMENTS to pass parameters
from command invocation.

For example, here’s a slash command that you could use to automatically pull and fix a
Github issue:

```
Please analyze and fix the GitHub issue: $ARGUMENTS.

Follow these steps:

1. Use `gh issue view` to get the issue details
2. Understand the problem described in the issue
3. Search the codebase for relevant files
4. Implement the necessary changes to fix the issue
5. Write and run tests to verify the fix
6. Ensure code passes linting and type checking
7. Create a descriptive commit message
8. Push and create a PR

Remember to use the GitHub CLI (`gh`) for all GitHub-related tasks.
```

Putting the above content into .claude/commands/fix-github-issue.md makes it available
as the /project:fix-github-issue command in Claude Code. You could then for example
use /project:fix-github-issue 1234 to have Claude fix issue #1234. Similarly, you
can add your own personal commands to the ~/.claude/commands folder for commands
you want available in all of your sessions.

#### Try common workflows

##### **Explore, plan, code, commit**

This versatile workflow suits many problems:

- Ask Claude to read relevant files, images, or URLs,

providing either general pointers ("read the file that handles logging") or specific
filenames ("read logging.py"), but explicitly tell it not to write any code just yet. 

- Ask Claude to make a plan for how to approach a specific problem. 

"think" < "think hard" < "think harder" < "ultrathink." Each level allocates
progressively more thinking budget for Claude to use

- Ask Claude to implement its solution in code.

- Ask Claude to commit the result and create a pull request.


##### ***Write tests, commit; code, iterate, commit***

This is an Anthropic-favorite workflow for changes that are easily verifiable with
unit, integration, or end-to-end tests. Test-driven development (TDD) becomes even
more powerful with agentic coding:

- Ask Claude to write tests based on expected input/output pairs.

- Tell Claude to run the tests and confirm they fail. 

- Ask Claude to commit the tests

- Ask Claude to write code that passes the tests,

- Ask Claude to commit the code

Claude performs best when it has a clear target to iterate against—a visual
mock, a test case, or another kind of output. By providing expected outputs like
tests, Claude can make changes, evaluate results, and incrementally improve until
it succeeds.


##### Write code, screenshot result, iterate

- Give Claude a way to take browser screenshots 

- Give Claude a visual mock 

- Ask Claude to implement the design

Ask Claude to implement the design in code, take screenshots of the result, and
iterate until its result matches the mock

- Ask Claude to commit when you're satisfied.

##### Safe YOLO mode

Instead of supervising Claude, you can use claude --dangerously-skip-permissions
to bypass all permission checks and let Claude work uninterrupted until completion.
This works well for workflows like fixing lint errors or generating boilerplate code.


##### ***Codebase Q&A***

When onboarding to a new codebase, use Claude Code for learning and exploration.
You can ask Claude the same sorts of questions you would ask another engineer
on the project when pair programming. Claude can agentically search the codebase
to answer general questions like:

- How does logging work?

- How do I make a new API endpoint?

- What does async move { ... } do on line 134 of foo.rs?

- What edge cases does CustomerOnboardingFlowImpl handle?

- Why are we calling foo() instead of bar() on line 333?

- What’s the equivalent of line 334 of baz.py in Java?

At Anthropic, using Claude Code in this way has become our core onboarding workflow,
significantly improving ramp-up time and reducing load on other engineers. No
special prompting is required! Simply ask questions, and Claude will explore the
code to find answers.


##### **Use Claude to interact with git**

Claude can effectively handle many git operations. Many Anthropic engineers use
Claude for 90%+ of our git interactions:

- Searching git history

- Writing commit messages

- Handling complex git operations like reverting files, resolving rebase conflicts,
and comparing and grafting patches


##### **Use Claude to interact with GitHub**

- Creating pull requests

- Implementing one-shot resolutions for simple code review comments

- Fixing failing builds or linter warnings

- Categorizing and triaging open issues by asking Claude to loop over open GitHub issues



#### Optimize your workflow

##### Be specific in your instructions

##### Give Claude images

Claude excels with images and diagrams through several methods:

    - Paste screenshots
    - Drag and drop
    - Provide file paths

##### Mention files you want Claude to look at or work on

Use tab-completion to quickly reference files or folders anywhere in your repository,
helping Claude find or update the right resources.

##### Give Claude URLs

Paste specific URLs alongside your prompts for Claude to fetch and read. To avoid
permission prompts for the same domains (e.g., docs.foo.com), use /permissions to
add domains to your allowlist.

##### Course correct early and often

    - Ask Claude to make a plan before coding. Explicitly tell it not to code until
    you’ve confirmed its plan looks good.

    - Press Escape to interrupt Claude during any phase (thinking, tool calls, file edits),
    preserving context so you can redirect or expand instructions.

    - Double-tap Escape to jump back in history, edit a previous prompt, and explore a
    different direction. You can edit the prompt and repeat until you get the result
    you're looking for.

    - Ask Claude to undo changes, often in conjunction with option #2 to take a different
    approach.


##### Use /clear to keep context focused

During long sessions, Claude's context window can fill with irrelevant conversation,
file contents, and commands. This can reduce performance and sometimes distract
Claude. Use the /clear command frequently between tasks to reset the context window.


##### Use checklists and scratchpads for complex workflows


##### Pass data into Claude

    - Copy and paste directly into your prompt (most common approach)

    - Pipe into Claude Code (e.g., cat foo.txt | claude), particularly useful for logs, CSVs, and large data

    - Tell Claude to pull data via bash commands, MCP tools, or custom slash commands

    - Ask Claude to read files or fetch URLs (works for images too)

#### Use headless mode to automate your infra

Claude Code includes headless mode for non-interactive contexts like CI,
pre-commit hooks, build scripts, and automation. Use the -p flag with a prompt to
enable headless mode, and --output-format stream-json for streaming JSON output.

Note that headless mode does not persist between sessions. You have to trigger it
each session.

##### Use Claude for issue triage

##### Use Claude as a linter



#### Uplevel with multi-Claude workflows

##### Have one Claude write code; use another Claude to verify


##### Have multiple checkouts of your repo


##### Use git worktrees

This approach shines for multiple independent tasks, offering a lighter-weight
alternative to multiple checkouts.


##### Use headless mode with a custom harness






